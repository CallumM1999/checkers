<!DOCTYPE html>
<html lang="en">
    <head>
        <% include ../components/head %>
        <title>Leaderboard | Checkers</title>
    </head>

    <script>
        var loaded = {
            data: [
                <% for(var i=0; i < data.length; i++) { %>
                    {
                      username: '<%= data[i].username %>',
                      win: <%= data[i].win %>,
                      lose: <%= data[i].lose %>,
                      draw: <%= data[i].draw %>,
                      games: <%= data[i].games %>,
                    },
                <% } %>
            ],
            next: <%= next %>,
            back: <%= back %>,
            total: <%= total %>,
        };
    </script>
    <body>
        <%- include('../components/header', { auth }); %>

        <div id="app">
            <div class="container">
                <div class="leaderboard__container">
                    <h1 class="leaderboard__title">Leaderboard</h1>

                    <% if (error) { %>
                    <p>Error: no data found</p>
                    <% } else { %>

                    <div class="leaderboard__overflow">
                        <table class="leaderboard__table">
                            <tr>
                                <th>Position</th>
                                <th>Username</th>
                                <th>Wins</th>
                                <th>Loses</th>
                                <th>Draws</th>
                                <th>Games</th>
                            </tr>

                            <tr v-for="(user, index) in data">
                                <td>{{ index + 1 + offset * interval }}</td>
                                <td>{{ user.username }}</td>
                                <td>{{ user.win }}</td>
                                <td>{{ user.lose }}</td>
                                <td>{{ user.draw }}</td>
                                <td>{{ user.games }}</td>
                            </tr>
                        </table>
                    </div>

                    <p>Page {{ offset + 1 }} of {{ Math.ceil((total * 2) / interval) }}</p>

                    <p>
                        <button @click="handleBack" disabled :disabled="!back">Back</button>
                        <button @click="handleNext" disabled :disabled="!next">Next</button>
                    </p>

                    <% } %>
                </div>
            </div>
        </div>

        <script src="/js/vue.bundle.js"></script>
        <script src="/js/leaderboard.bundle.js"></script>
    </body>
</html>
